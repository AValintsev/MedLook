@model TopMenuModel
@{
	var rootCategoriesResponsive = Model.Categories.ToList();

	<div class="hamburger-menu">
		@await Component.InvokeAsync("HeaderLinks")

		<input id="menu__toggle" type="checkbox" />
		<label class="menu__btn" for="menu__toggle">
			<span></span>
		</label>
		<ul class="menu__box">
			<li>
				@await Component.InvokeAsync("LanguageSelector")
			</li>

			@await Component.InvokeAsync("Widget", new { widgetZone = PublicWidgetZones.MobHeaderMenuBefore })

			@if (Model.DisplayHomepageMenuItem)
			{
				<li><a class="menu__item" href="@Url.RouteUrl("Homepage")">@T("Homepage")</a></li>
			}

			@foreach (var category in rootCategoriesResponsive)
			{
				var categoryLineModel = new TopMenuModel.CategoryLineModel
				{
					Category = category,
					ResponsiveMobileMenu = true
				};
				@await Html.PartialAsync("_CategoryLine.TopMenu", categoryLineModel)
			}


			@foreach (var topic in Model.Topics)
			{
				<li><a class="menu__item" href="@Url.RouteUrl("Topic", new { SeName = topic.SeName })">@topic.Name</a></li>
			}

			@if (Model.DisplayProductSearchMenuItem)
			{
				<li><a class="menu__item" href="@Url.RouteUrl("ProductSearch")">@T("Search")</a></li>
			}
			@if (Model.DisplayCustomerInfoMenuItem)
			{
				<li><a class="menu__item" href="@Url.RouteUrl("CustomerInfo")">@T("Account.MyAccount")</a></li>
			}
			@*@if (Model.BlogEnabled && Model.DisplayBlogMenuItem)
		{
			<li><a class="menu__item" href="@Url.RouteUrl("Blog")">@T("Blog")</a></li>
		}*@
			@if (Model.DisplayContactUsMenuItem)
			{
				<li><a class="menu__item" href="@Url.RouteUrl("ContactUs")">@T("ContactUs")</a></li>
			}


			<li><a href="@Url.RouteUrl("Logout")" class="ico-logout">@T("Account.Logout")</a></li>

			@await Component.InvokeAsync("Widget", new { widgetZone = PublicWidgetZones.MobHeaderMenuAfter })
		</ul>
	</div>

	@if (Model.UseAjaxMenu)
	{
		<script asp-location="Footer">

        $(document).ready(function () {
          @*$('.menu-toggle').on('click', function () {
                $(this).siblings('.top-menu.mobile').slideToggle(100);
            });
            var localized_data = {
                AjaxFailure: "@T("MainMenu.AjaxFailure")"
            };*@
            mainMenu.init('@Url.RouteUrl("GetCatalogRoot")', '@Url.RouteUrl("GetCatalogSubCategories")', 'ul.top-menu.notmobile', 'ul.top-menu.mobile', localized_data);
        });
		</script>

		Html.AppendScriptParts(ResourceLocation.Footer, "~/js/public.menu.js");

	}


}
